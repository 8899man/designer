
apply plugin: 'java'
tasks.withType(JavaCompile){
	options.encoding = 'UTF-8'
}

version='8.0'

def srcDir="."



jar{
	baseName='fr-designer-report'
}

sourceSets{
		main{
			java{
				srcDirs=["${srcDir}/src",
"${srcDir}/../designer/src"]
			}
		}
}
dependencies{
compile fileTree(dir:'../../fr-lib-8.0-gradle',include:'**/*.jar')
compile fileTree(dir:'../../',include:'fr-*-8.0-gradle/**/*.jar')

 	testCompile 'junit:junit:4.12'
}


task copyFile(type:Copy,dependsOn:compileJava){
	copy{
		from ("${srcDir}/src"){
			exclude '**/*.java'
		}
		from ("${srcDir}/../designer/src"){
			exclude '**/*.java'
		}
		into ('build/classes/main')
	}

}


//压缩项目中的js文件
task compressJS{
	ant.taskdef(name:'yuicompress',classname:'com.yahoo.platform.yui.compressor.YUICompressTask'){
		classpath {
			fileset(dir:'../../fr-build-8.0-gradle',includes:'**/*.jar')
		}
	}
	ant.yuicompress(linebreak:"500",warn:"false", munge:"yes",preserveallsemicolons:"false", , charset:"utf-8",encoding:"utf-8",outputfolder:'build/classes/main'){
		fileset (dir:"${srcDir}/src"){
			include (name:'**/*.js')

		}
		fileset (dir:"${srcDir}/../designer/src"){
			include (name:'**/*.js')

		}

	}
}
jar.dependsOn compressJS

